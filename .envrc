#!/usr/bin/env bash
# ^ added for shellcheck and file-type detection

if [[ $(type -t use_flake) != function ]]; then
  echo "ERROR: use_flake function missing."
  echo "Please update direnv to v2.30.0 or later."
  exit 1
fi

source_env_if_exists .envrc.local

if [[ -n ${NIX_GITHUB_TOKEN:-} ]]; then
  export NIX_CONFIG="access-tokens = github.com=$NIX_GITHUB_TOKEN"
fi

use_flake
